# 贪心经典模型

## 区间

### 问题 1：最多不相交区间

!!! 洛谷 P1803 

    给定 $N$ 个区间 $[l_i, r_i]$，请选出尽可能多的不相交的区间，求出这个数量。$1 \le N \le 10^5, 1 \le l_i, r_i \le 10^9$。

贪心策略：按右端点排序；每次尽可能选择右端点小的、且和上一个选择的区间不相交的区间。

伪证明：右端点递增。右端点越小，后续可选的区间的左端点范围越广。

### 问题 2：区间覆盖

!!! 洛谷 P2082

    给定 $N$ 个区间 $l_i, r_i$。请求出有多少个整数点被至少一个区间覆盖过。$1 \le N \le 10^5, 1 \le l_i, r_i, V \le 10^9$。

贪心策略：按左端点排序。

实现：

- 记录已覆盖区间的右端点 `R` 和答案 `ans`。
- 如果当前区间左端点 $l_i \gt R$，说明后续的区间（包括当前区间）与前面的区间都不相交，`ans += r_i - l_i + 1`，更新 `R = r_i`。
- 否则，说明当前区间与之前区间相交，`ans += max(0, r_i - R)`，更新 `R = r_i`。
- 注意画图解释。

类似的题目：洛谷 P2434

### 问题 3：区间选点

!!! 洛谷 P1325

    给定 $N$ 个区间 $[l_i, r_i]$，请选出尽可能少的点，使得每个区间都包含至少一个选出的点。$1 \le N \le 10^5, 1 \le l_i, r_i \le 10^9$。

贪心策略：按右端点排序，选出的点尽可能放在右端点处；如果当前区间包含上一个选的点，不管，否则直接选当前区间右端点（当前区间上一个选的点对应的区间不相交）

有意思的点：本题答案等价于问题 1 的答案。

### 问题 4：区间分组

此题需要前置知识点：优先队列。

!!! 洛谷 P2859

    给定 $N$ 个区间 $l_i, r_i$。请将区间进行分组，每个区间属于一组，每组至少包含一个区间，并且每组内的区间互不相交。求最少分组数。$1 \le N \le 10^5, 1 \le l_i, r_i \le 10^9$。

贪心策略：按左端点排序；维护**每组**区间的最大右端点；如果当前区间的左端点均小于所有组的最大右端点，新开一组，否则找到任意一个不相交的组，把当前区间放入该组，并更新该组右端点。$O(N^2)$。

优化：使用优先队列维护所有组的右端点，判断区间相交时，只需要找最小右端点判断即可。$O(N \log N)$。

## 配对

### 问题 1：洛谷 P1094 纪念品分组

!!! 题意

    给定 $N$ 个纪念品，每个纪念品有一个价值。一组礼物包含 $1$ 个或 $2$ 个纪念品，每组纪念品的价值之和不能超过 $M$。求出最多能分出的组数。保证每个纪念品的价值都不超过 $M$。

贪心策略：将当前价值最大和最小的纪念品配对，如果配对的总价值符合要求，则配对成功，两个纪念品放入同一组；否则配对失败，将价值最大的纪念品单独放入一个组。

实现：按价值排序后，双指针模拟即可。

### 问题 2：洛谷 P8837 商店

!!! 题意

    有 $N$ 个人，每个人手上有 $w_i$ 元钱。有 $M$ 件商品，每件商品价格 $c_i$ 元。每个人最多买一件商品，每个商品只能被买一次。求出最多有多少人买到商品。

贪心策略 1：对于第 $i$ 件商品，找到手上钱数 $w_j \ge c_i$ 且 $w_j$ 尽可能小的人 $j$，把第 $i$ 件商品卖给第 $j$ 个人。

- 钱数越多的人越有可能买到商品，对于每件商品选钱数最少的人来买，保留了钱更多的人买到商品的可能性。

贪心策略 2：对于第 $i$ 个人，找到商品价格 $c_j \le w_i$ 且 $c_j$ 最大的商品 $j$，第 $i$ 个人买第 $j$ 件商品。

- 一个人可以买到价格不多于手上钱数的商品，买价格最大的商品，保留了价格更小的商品被卖的可能性。

## 优化

### 问题 1：abc258_d

!!! 题意

    游戏有 $N$ 个关卡。第一次通关第 $i$ 个关卡需要 $A_i + B_i$ 分钟，后续通过第 $i$ 个关卡需要 $A_i$ 分钟。只有通过第 $i$ 个关卡，才能资格通过第 $i + 1$ 个关卡。求出最少需要多少分钟通关恰好 $X$ 个关卡。

贪心策略：假设（枚举）我们只玩了前 $i$ 个关卡，那么前 $i$ 个关卡肯定要通过一次。对于剩余的 $X - i$ 个关卡，选择 $A_1 \dots A_i$ 中最小的关卡通过 $X - i$ 次。

### 问题 2：洛谷 P9749

